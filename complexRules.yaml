---
rules:
#REGLES VALIDEES AURELIE
# NOTA IMPORTANT : ID principal (règle complexe) à partir de 5000 puis décliné en dizaine (5010-5020-5030....)
# ID secondaire (règles simples qui composent la règle complexe) : reprend l'ID principal, décliné par unité (exemple pour règle complexe 5000 : 5001-5002-5003...)

   - id: 5000
     id-excel: 315
     message: "Partie composante : vérifier que le titre du document hôte enregistré en 463 est bien le même que celui enregistré en 305$a"
     priorite: P2
     type-doc:
       - PC
     regles:
       - id: 5001
         type: presencesouszone
         zone: '463'
         souszone:    t
         presence: true
       - id: 5002
         type: presencesouszone
         zone: '305'
         souszone:    a
         presence: true
         operateur-booleen: ET


   - id: 5010
     id-excel: 316
     message: "Partie composante : vérifier que la date du document hôte enregistrée en 463 est bien la même que celle enregistrée en 305$a"
     priorite: P2
     type-doc:
       - PC
     regles:
       - id: 5011
         type: presencesouszone
         zone: '463'
         souszone:    d
         presence: true
       - id: 5012
         type: presencesouszone
         zone: '305'
         souszone:    a
         presence: true
         operateur-booleen: ET

#règle 5020 :  A SUPPRIMER  / ATTENTION A ETE MODIFIEE ET GENERE DES ERREURS CAR DOUBLONS ID / doublon ok règle 5070
   - id: 5020
     id-excel: 99
     message: "Carte : puisqu'une échelle est enregistrée en zone 123, elle doit aussi être transcrite en zone 206. Privilégier une zone 206 structurée"
     priorite: P1
     type-doc:
       - K
     regles:
       - id: 5026
         type: presencesouszone
         zone: '206'
         souszone:    a
         presence: false
       - id: 5027
         type: presencesouszone
         zone: '206'
         souszone:    b
         presence: false
         operateur-booleen: OU
       - id: 5025
         type: presencezone
         zone: '206'
         presence: true
         operateur-booleen: ET
       - id: 5028
         type: presencesouszone
         zone: '123'
         souszone:    b
         presence: true
         operateur-booleen: ET

#règle 5030 : attention, cette règle doit être complété si futurs prélable sur règle simple sous-zone mis en place
   - id: 5030
     id-excel: 269
     message: "Enregistrement sonore : puisqu'une note de contenu a été enregistrée en 359$b, des liens doivent être faits en 464$t ou en 500$3 (au moins pour 3 contenus, au-delà c'est facultatif)"
     priorite: P2
     type-doc:
       - N
     regles:
       - id: 5031
         type: presencesouszone
         zone: '464'
         souszone:    t
         presence: false
       - id: 5032
         type: presencesouszone
         zone: '500'
         souszone:    3
         presence: false
         operateur-booleen: ET
       - id: 5033
         type: presencesouszone
         zone: '359'
         souszone:    b
         presence: true
         operateur-booleen: ET
         
         
   - id: 5040
     id-excel: 272
     message: "Puisqu'un lien vers une collection a été enregistré en zone 410, une mention de collection doit être enregistrée en 225. Utiliser le bon indicateur : 225 0# ou 225 2#"
     priorite: P1
     type-doc:
       -    A
       -    B
       -    K
       -    O
       -    N
       -    I
       -    F
       -    Z
       -    G
       -    M
       -    PC
     regles:
       - id: 5041
         type: presencezone
         zone: '410'
         presence: true
       - id: 5042
         type: presencezone
         zone: '225'
         presence: false
         operateur-booleen: ET



         
   - id: 5050
     id-excel: 158
     message: "Zone 210  obsolète :  à remplacer par une zone 214 (document en main, en sélectionnant les bons indicateurs)"
     priorite: P1
     regles:
       - id: 5051
         type: presencezone
         zone: '210'
         presence: true
       - id: 5052
         type: presencezone
         zone: '214'
         presence: false
         operateur-booleen: ET
         
                  
   - id: 5060
     id-excel: 321
     message: "Puisque un autre type de relation est enregistré en zone 488, une note sur les zones de lien en zone 311 est obligatoire pour préciser la nature du lien entre les 2 documents"
     priorite: P1
     regles:
       - id: 5061
         type: presencezone
         zone: '488'
         presence: true
       - id: 5062
         type: presencezone
         zone: '311'
         presence: false
         operateur-booleen: ET
         
         
#règle 5070 : A CONSERVER / DOUBLON OK regle 5020
   - id: 5070
     id-excel: 99
     message: "Carte : puisqu'une échelle est enregistrée en zone 123, elle doit aussi être transcrite en zone 206. Privilégier une zone 206 structurée (indicateur 1 = 0)"
     priorite: P1
     type-doc:
       - K
     regles:
       - id: 5071
         type: presencesouszone
         zone: '206'
         souszone:    a
         presence: false
       - id: 5072
         type: presencesouszone
         zone: '206'
         souszone:    b
         presence: false
         operateur-booleen: OU
       - id: 5073
         type: presencezone
         zone: '206'
         presence: true
         operateur-booleen: ET
       - id: 5074
         type: presencesouszone
         zone: '123'
         souszone:    b
         presence: true
         operateur-booleen: ET


#Penser à supprimer règle simple nb de caractères règle 800
   - id: 5080
     id-excel: 445
     message: "Zone 700 : les dates en sous-zone $f doivent être sous la forme AAAA-AAAA avec '.' à la place de l'année inconnue et '?' à la place des années incertaines"
     priorite: P1
     regles:
       - id: 5081
         type: nombrecaractere
         zone: '700'
         souszone:   f
         operateur:  INFERIEUR
         occurrences: 9
       - id: 5082
         type: nombrecaractere
         zone: '700'
         souszone:   f
         operateur:  SUPERIEUR
         occurrences: 9
         operateur-booleen: OU
         


   - id: 5090
     id-excel: 268
     message: "Zone 345 : s'il s'agit bien d'un EAN enregistré en $b, ce numéro a maintenant sa place en zone 073"
     priorite: P1
     regles:
       - id: 5091
         type: nombrecaractere
         zone: '345'
         souszone:   b
         operateur:  EGAL
         occurrences: 13
       - id: 5092
         type: typecaractere
         zone: '345'
         souszone:   b
         type-caracteres:
           - "NUMERIQUE"
         operateur-booleen: ET
